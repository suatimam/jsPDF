<!doctype html>
<!--
/**
 * jsPDF AcroForm PlugIn
 * Copyright (c) 2015 Jan Slabon (Setasign)  jan.slabon@setasign.com
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
-->

<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <title>Signature Field Test</title>

    <script type="text/javascript" src="../jspdf.js"></script>
    <!-- required by the plugin to test  -->
    <script type="text/javascript" src="../jspdf.plugin.standard_fonts_metrics.js"></script>
    <script type="text/javascript" src="../jspdf.plugin.split_text_to_size.js"></script>
    <!-- the plugin to test  -->
    <script type="text/javascript" src="../jspdf.plugin.annotations.js"></script>
    <script type="text/javascript" src="../jspdf.plugin.acroform.js"></script>

    <script>
        window.onload = function() {


            var pdf = new jsPDF('p', 'pt', 'letter');

            pdf.addSignatureField('Signature', 10, 10, 110, 35);

            // generate either the pdf or source code
            if (getParameterByName('src') != 'true'){
                var frame = document.getElementById('pdfframe');
                frame.src = pdf.output('datauristring');
            }
            else{
                var content = document.getElementById('sourcecode');
                var raw =  pdf.output();
                raw = escapeHtml(raw);
                content.innerHTML = raw;
            }

        }

        var entityMap = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': '&quot;',
            "'": '&#39;',
            "/": '&#x2F;'
        };

        function escapeHtml(string) {
            return String(string).replace(/[&<>"'\/]/g, function (s) {
                return entityMap[s];
            });
        }

        function getParameterByName(name) {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                    results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }

    </script>

</head>

<body style='background-color: silver; margin: 0;'>
<pre id='sourcecode'></pre>
<iframe id='pdfframe' style='width: 100%; height: 100%; position: absolute'></iframe>
</body>
</html>
